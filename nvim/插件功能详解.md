# Neovim 插件功能详解

## 📋 目录
- [主题与外观](#主题与外观)
- [文件管理](#文件管理)
- [编辑增强](#编辑增强)
- [代码补全](#代码补全)
- [LSP 支持](#lsp-支持)
- [语法高亮](#语法高亮)
- [搜索工具](#搜索工具)
- [AI 辅助](#ai-辅助)
- [终端集成](#终端集成)
- [其他工具](#其他工具)

---

## 🎨 主题与外观

### tokyonight.nvim

**功能：** 美观的配色主题

**特点：**
- 支持多种风格：night、storm、day、moon
- 专为终端和 GUI 优化
- 良好的对比度和可读性
- 支持多种插件的主题集成

**使用：**
```vim
:colorscheme tokyonight
```

---

### lualine.nvim

**功能：** 快速且易于配置的状态栏

**显示内容：**
- 当前模式（Normal、Insert、Visual 等）
- 文件名和修改状态
- Git 分支信息
- 文件类型
- 光标位置
- 文件编码
- LSP 状态

**位置：** 窗口底部

---

### bufferline.nvim

**功能：** 标签页/Buffer 管理器

**特点：**
- 在顶部显示所有打开的 buffer
- 可视化显示 buffer 状态（已修改、只读等）
- 支持鼠标点击切换
- 集成文件类型图标

**快捷键：**
- `<leader>p` - 快速选择 buffer
- `<leader>x` - 关闭当前 buffer

---

### nvim-web-devicons

**功能：** 文件类型图标

**特点：**
- 为不同文件类型显示对应图标
- 需要 Nerd Font 支持
- 被多个插件使用（nvim-tree、telescope 等）

---

### indent-blankline.nvim

**功能：** 显示缩进参考线

**特点：**
- 可视化代码缩进层级
- 帮助识别代码块结构
- 高亮当前作用域

---

### which-key.nvim

**功能：** 快捷键提示和帮助

**特点：**
- 按下 Leader 键后显示可用的快捷键
- 分类显示快捷键功能
- 帮助记忆复杂的按键组合

**使用：**
- 按 `<Space>` 等待 500ms 自动显示
- `<leader>?` 显示所有快捷键

---

### dashboard-nvim

**功能：** 启动页面

**特点：**
- 美观的欢迎界面
- 快速访问常用功能
- 显示最近文件
- 项目快速跳转

---

### noice.nvim

**功能：** 命令行、通知和消息界面美化

**特点：**
- 现代化的命令行界面
- 美观的通知弹窗
- LSP 进度显示
- 搜索结果计数

**依赖：**
- nvim-notify - 通知系统
- nui.nvim - UI 组件库

---

## 📁 文件管理

### nvim-tree.lua

**功能：** 文件树浏览器

**核心功能：**
- 树形显示项目结构
- 文件和文件夹操作（创建、删除、重命名、复制、移动）
- Git 状态集成
- 文件类型图标
- 隐藏文件/文件夹过滤

**快捷键：**
- `<leader>e` - 打开/关闭文件树

**文件树内操作：**
```
文件操作：
a - 新建文件/文件夹
d - 删除
r - 重命名
x - 剪切
c - 复制
p - 粘贴

导航：
<CR> - 打开文件/展开文件夹
- - 跳到父目录
H - 切换隐藏文件显示
R - 刷新

信息：
y - 复制文件名
Y - 复制相对路径
gy - 复制绝对路径
```

**配置特点：**
- 宽度：34 字符
- 位置：左侧
- 默认隐藏点文件（dotfiles）
- Git 集成已启用

---

## ✏️ 编辑增强

### nvim-treesitter

**功能：** 高级语法解析和高亮

**特点：**
- 基于 AST 的精确语法高亮
- 代码结构感知
- 智能文本对象
- 增量选择
- 彩虹括号

**支持语言：** 50+ 种编程语言

**功能模块：**
- **highlight** - 语法高亮
- **indent** - 智能缩进
- **incremental_selection** - 增量选择
- **textobjects** - 文本对象

**示例操作：**
```
在函数内：
vaf - 选择整个函数（包括定义）
vif - 选择函数内容（不包括定义）
```

---

### nvim-treesitter-context

**功能：** 显示当前代码上下文

**特点：**
- 在窗口顶部固定显示当前函数/类名
- 滚动时自动更新上下文
- 帮助在长函数中定位位置

---

### nvim-autopairs

**功能：** 自动配对括号、引号等

**特点：**
- 输入 `(` 自动补全 `)`
- 输入 `[` 自动补全 `]`
- 输入 `{` 自动补全 `}`
- 输入 `"` 自动补全 `"`
- 智能处理删除和换行

**示例：**
```
输入: console.log(
结果: console.log(|)    (| 表示光标位置)

输入: {<CR>
结果:
{
  |
}
```

---

### nvim-surround

**功能：** 快速修改环绕字符

**核心命令：**
- `ys{motion}{char}` - 添加环绕
- `ds{char}` - 删除环绕
- `cs{old}{new}` - 更改环绕

**实用示例：**
```lua
-- 添加引号
原: hello
按: ysiw"
果: "hello"

-- 更改引号
原: "hello"
按: cs"'
果: 'hello'

-- 添加函数调用
原: hello
按: ysiwfprint<CR>
果: print(hello)

-- 删除括号
原: (hello)
按: ds(
果: hello

-- 环绕整行
原: local x = 10
按: yss}
果: { local x = 10 }
```

**HTML 标签支持：**
```html
原: hello
按: ysiwt
输入: div
果: <div>hello</div>

更改标签:
原: <div>hello</div>
按: csth1
果: <h1>hello</h1>
```

---

### flash.nvim

**功能：** 极速跳转到屏幕任意位置

**快捷键：**
- `s` - 向前跳转
- `S` - 向后跳转
- `r` - 远程操作
- `R` - 树形选择

**使用方法：**
1. 按 `s`
2. 输入目标位置的 1-2 个字符
3. 屏幕上会显示标签（如 `a`, `b`, `c`）
4. 按对应标签字母跳转

**示例：**
```
屏幕内容:
function hello() {
  const name = "world";
  console.log(name);
}

按 s + wo
屏幕显示:
function hello() {
  const name = "aworld";
  console.log(name);
}

按 a 跳转到 "world"
```

**优势：**
- 比 `/` 搜索更快
- 比 `f/t` 移动范围更大
- 2 个字符即可精确定位

---

### hop.nvim

**功能：** 另一个快速跳转插件（备选）

类似 flash.nvim，提供快速跳转功能。

---

## 🔧 代码补全

### blink-cmp

**功能：** 现代化的补全引擎

**补全源：**
- LSP - 语言服务器补全
- Buffer - 当前缓冲区单词
- Path - 文件路径补全
- Snippets - 代码片段

**特点：**
- 高性能异步补全
- 智能排序
- 模糊匹配
- 文档预览
- 图标支持

**快捷键：**
```
插入模式下：
<Tab> - 选择下一个
<S-Tab> - 选择上一个
<CR> - 确认选择
<C-e> - 关闭补全菜单
```

**补全菜单显示内容：**
- 函数签名
- 类型信息
- 文档说明
- 来源标识

---

## 🔧 LSP 支持

### mason.nvim

**功能：** LSP 服务器、DAP 服务器、Linter 和 Formatter 管理器

**核心功能：**
- 一键安装 LSP 服务器
- 自动更新
- 图形化管理界面
- 支持 100+ 工具

**使用：**
```vim
:Mason
```

**界面操作：**
- `i` - 安装
- `u` - 更新
- `X` - 卸载
- `/` - 搜索
- `q` - 退出

**常用 LSP 服务器：**
```
语言          服务器名称
------------------------------
Lua          lua_ls
Python       pyright
TypeScript   tsserver
Rust         rust_analyzer
Go           gopls
C/C++        clangd
Java         jdtls
JSON         jsonls
HTML         html
CSS          cssls
```

---

### lspsaga.nvim

**功能：** 增强 LSP UI 体验

**核心功能：**

1. **代码导航**
   - 跳转到定义
   - 查找引用
   - 预览定义

2. **代码操作**
   - 重命名符号
   - 代码修复
   - 重构建议

3. **诊断**
   - 美观的错误显示
   - 错误导航
   - 诊断预览

4. **悬停文档**
   - 类型信息
   - 函数签名
   - 文档注释

5. **浮动终端**
   - 集成终端
   - 快速访问

**快捷键：**
```
<leader>lr - 重命名
<leader>lc - 代码操作
<leader>ld - 跳转定义
<leader>lh - 显示文档
<leader>lR - 查找引用
<leader>ln - 下一个诊断
<leader>lp - 上一个诊断
<leader>t  - 浮动终端
```

---

### none-ls.nvim

**功能：** 将非 LSP 工具集成为 LSP

**用途：**
- 代码格式化
- 代码检查（Linting）
- 代码操作

**支持工具：**
```
Formatters:
- prettier - JavaScript/TypeScript/JSON/Markdown
- black - Python
- stylua - Lua
- rustfmt - Rust
- gofmt - Go

Linters:
- eslint - JavaScript/TypeScript
- pylint - Python
- shellcheck - Shell scripts
```

**使用：**
```vim
" 格式化当前文件
:lua vim.lsp.buf.format()
```

---

### rustaceanvim

**功能：** Rust 语言专用增强

**特点：**
- 集成 rust-analyzer
- Cargo 集成
- 调试支持
- 测试运行器

---

## 🔍 搜索工具

### telescope.nvim

**功能：** 强大的模糊搜索器

**核心功能：**

1. **文件搜索**
   - 按文件名搜索
   - 尊重 .gitignore
   - 快速预览

2. **内容搜索**
   - 全项目 grep
   - 实时搜索
   - 支持正则表达式

3. **其他搜索**
   - 命令搜索
   - 帮助标签搜索
   - Git commits
   - LSP 符号

**快捷键：**
```
<leader>f  - 搜索文件
<leader>F  - 搜索内容
<leader>ff - 搜索文件（替代）
<leader>fg - 搜索内容（替代）
```

**Telescope 窗口内快捷键：**
```
<C-j> - 下一个结果
<C-k> - 上一个结果
<C-u> - 预览向上滚动
<C-d> - 预览向下滚动
<C-c> - 关闭
<CR>  - 打开选中项
```

**依赖：**
- ripgrep - 内容搜索
- fd - 文件搜索（可选但推荐）

---

### grug-far.nvim

**功能：** 项目范围的搜索和替换

**特点：**
- 可视化搜索和替换界面
- 支持正则表达式
- 预览替换结果
- 批量操作

**使用：**
```vim
:GrugFar
```

**工作流程：**
1. 输入搜索内容
2. 输入替换内容
3. 预览更改
4. 确认替换

---

## 🤖 AI 辅助

### avante-nvim

**功能：** AI 驱动的代码助手

**特点：**
- 代码生成
- 代码解释
- 重构建议
- 问题诊断

**使用场景：**
- 生成函数实现
- 解释复杂代码
- 优化算法
- 修复错误

---

### codecompanion

**功能：** AI 编程伴侣

**特点：**
- 上下文感知的代码建议
- 自然语言转代码
- 代码文档生成

---

## 💻 终端集成

### 浮动终端（Lspsaga）

**功能：** 轻量级浮动终端

**特点：**
- 快速打开/关闭
- 浮动窗口显示
- 不干扰编辑布局

**快捷键：**
```
<leader>t - 打开/关闭
jk/Esc    - 退出终端模式
```

---

### toggleterm.nvim

**功能：** 功能丰富的终端管理器

**特点：**
- 持久化终端会话
- 多个终端实例
- 水平/垂直/浮动布局

**快捷键：**
```
<leader>lt - 打开/关闭终端
```

---

## 🛠 其他工具

### im-select.nvim

**功能：** 自动切换输入法

**特点：**
- 进入插入模式切换到中文输入法
- 退出插入模式恢复英文
- 避免命令模式中文输入错误

**macOS 配置：**
需要安装 `im-select`：
```bash
brew install im-select
```

---

### nvim-comment

**功能：** 快速注释代码

**快捷键：**
```
gcc - 注释/取消注释当前行
gc{motion} - 注释/取消注释
gbc - 块注释当前行
```

**示例：**
```
gcap - 注释当前段落
gc3j - 注释下面 3 行
```

---

## 📊 插件依赖关系

```
┌─────────────┐
│  Lazy.nvim  │  ← 插件管理器
└──────┬──────┘
       │
       ├─→ UI 插件
       │    ├─→ tokyonight
       │    ├─→ lualine
       │    ├─→ bufferline
       │    ├─→ nvim-tree
       │    ├─→ which-key
       │    ├─→ dashboard
       │    └─→ noice
       │
       ├─→ 编辑增强
       │    ├─→ nvim-treesitter
       │    ├─→ nvim-autopairs
       │    ├─→ nvim-surround
       │    └─→ flash.nvim
       │
       ├─→ 补全系统
       │    └─→ blink-cmp
       │
       ├─→ LSP 生态
       │    ├─→ mason.nvim
       │    ├─→ lspsaga.nvim
       │    └─→ none-ls.nvim
       │
       ├─→ 搜索工具
       │    ├─→ telescope.nvim
       │    │    ├─→ plenary.nvim
       │    │    └─→ telescope-fzf-native
       │    └─→ grug-far.nvim
       │
       └─→ AI 工具
            ├─→ avante-nvim
            └─→ codecompanion
```

---

## 🎯 插件使用建议

### 必学插件（优先级高）

1. **nvim-tree** - 文件管理基础
2. **telescope** - 搜索是核心技能
3. **lspsaga** - 代码导航必备
4. **blink-cmp** - 提升编码效率

### 进阶插件（优先级中）

5. **nvim-surround** - 提升编辑速度
6. **flash.nvim** - 高效移动
7. **mason** - 管理开发工具
8. **which-key** - 学习快捷键

### 特殊场景插件（按需学习）

9. **avante-nvim/codecompanion** - AI 辅助
10. **grug-far** - 批量重构
11. **toggleterm** - 终端集成

---

## 📝 配置文件位置

```
~/.config/nvim/lua/plugins/
├── init.lua              # 主题
├── telescope.lua         # 文件搜索
├── nvim-tree.lua         # 文件树
├── lspsaga.lua           # LSP UI
├── blink-cmp.lua         # 补全
├── flash-nvim.lua        # 快速跳转
├── nvim-surround.lua     # 环绕操作
├── nvim-treesitter.lua   # 语法解析
├── mason.lua             # LSP 管理
├── lualine.lua           # 状态栏
├── bufferline.lua        # Buffer 栏
├── which-key.lua         # 快捷键提示
├── nvim-dashboard.lua    # 启动页
├── noice.lua             # 消息美化
├── grug-far.lua          # 搜索替换
├── avante-nvim.lua       # AI 助手
└── codecompanion.lua     # AI 伴侣
```

---

## 🔄 更新插件

```vim
:Lazy update
```

检查插件健康状态：
```vim
:checkhealth
```

---

**有了这些强大的插件，你的 Neovim 将成为真正的 IDE！** 🚀
